import{G as D,j as t,s as U,a6 as ie,o as le,r as h,m as ce,n as de,N as G,Q as X,R as _,p as ve,aL as we,aM as ge,v as ue,w as he,C as Re,t as Se,H as ke,g as $,am as z,e as pe,T as P,ac as Te,ad as B,aN as qe,aO as Pe,S as v,aP as E,B as Ie,aj as Oe,aI as Ee,an as Be,L as ze,al as H,P as Y}from"./index-2Pq0canh.js";import{S as Me,a as W,u as Ne,L as me,b as fe,c as Fe,d as Ge}from"./index-B9PDQVJT.js";import{F as De,k as K,i as Ue,b as Z,l as I,I as Ae,e as Je,f as ee,g as Le,h as He,j as Ve,d as te,u as $e}from"./selectedRequest-CQjJOGIc.js";import{i as We}from"./isEmptyValues-BYo5e0_1.js";const Ke=D(t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),Qe=D(t.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),Xe=U("span",{shouldForwardProp:ie})({position:"relative",display:"flex"}),_e=U(Ke)({transform:"scale(1)"}),Ye=U(Qe)(le(({theme:e})=>({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}}]})));function xe(e){const{checked:s=!1,classes:a={},fontSize:o}=e,n={...e,checked:s};return t.jsxs(Xe,{className:a.root,ownerState:n,children:[t.jsx(_e,{fontSize:o,className:a.background,ownerState:n}),t.jsx(Ye,{fontSize:o,className:a.dot,ownerState:n})]})}const je=h.createContext(void 0);function Ze(){return h.useContext(je)}function et(e){return de("MuiRadio",e)}const se=ce("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),tt=e=>{const{classes:s,color:a,size:o}=e,n={root:["root",`color${G(a)}`,o!=="medium"&&`size${G(o)}`]};return{...s,...he(n,et,s)}},st=U(Me,{shouldForwardProp:e=>ie(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:a}=e;return[s.root,a.size!=="medium"&&s[`size${G(a.size)}`],s[`color${G(a.color)}`]]}})(le(({theme:e})=>({color:(e.vars||e).palette.text.secondary,[`&.${se.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:X(e.palette.action.active,e.palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(_()).map(([s])=>({props:{color:s,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[s].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:X(e.palette[s].main,e.palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(_()).map(([s])=>({props:{color:s,disabled:!1},style:{[`&.${se.checked}`]:{color:(e.vars||e).palette[s].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function at(e,s){return typeof s=="object"&&s!==null?e===s:String(e)===String(s)}const ae=t.jsx(xe,{checked:!0}),ne=t.jsx(xe,{}),oe=h.forwardRef(function(s,a){const o=ve({props:s,name:"MuiRadio"}),{checked:n,checkedIcon:r=ae,color:m="primary",icon:f=ne,name:c,onChange:d,size:u="medium",className:b,disabled:M,disableRipple:S=!1,...j}=o,g=we();let C=M;g&&typeof C>"u"&&(C=g.disabled),C??(C=!1);const k={...o,disabled:C,disableRipple:S,color:m,size:u},x=tt(k),T=Ze();let q=n;const A=ge(d,T&&T.onChange);let N=c;return T&&(typeof q>"u"&&(q=at(T.value,o.value)),typeof N>"u"&&(N=T.name)),t.jsx(st,{type:"radio",icon:h.cloneElement(f,{fontSize:ne.props.fontSize??u}),checkedIcon:h.cloneElement(r,{fontSize:ae.props.fontSize??u}),disabled:C,ownerState:k,classes:x,name:N,checked:q,onChange:A,ref:a,className:ue(x.root,b),...j})});function nt(e){return de("MuiRadioGroup",e)}ce("MuiRadioGroup",["root","row","error"]);const ot=e=>{const{classes:s,row:a,error:o}=e;return he({root:["root",a&&"row",o&&"error"]},nt,s)},rt=h.forwardRef(function(s,a){const{actions:o,children:n,className:r,defaultValue:m,name:f,onChange:c,value:d,...u}=s,b=h.useRef(null),M=ot(s),[S,j]=Re({controlled:d,default:m,name:"RadioGroup"});h.useImperativeHandle(o,()=>({focus:()=>{let x=b.current.querySelector("input:not(:disabled):checked");x||(x=b.current.querySelector("input:not(:disabled)")),x&&x.focus()}}),[]);const g=Se(a,b),C=ke(f),k=h.useMemo(()=>({name:C,onChange(x){j(x.target.value),c&&c(x,x.target.value)},value:S}),[C,c,j,S]);return t.jsx(je.Provider,{value:k,children:t.jsx(De,{role:"radiogroup",ref:g,className:ue(M.root,r),...u,children:n})})}),it=()=>{const e=$();return W({mutationFn:async s=>await K.addCustomRequest(s),mutationKey:["add-custom-request"],onSuccess:()=>{e.invalidateQueries({queryKey:["custom-requests"]})}})},lt=()=>{const e=$();return W({mutationFn:async s=>await K.deleteCustomRequest(s),mutationKey:["delete-custom-request"],onSuccess:()=>{e.invalidateQueries({queryKey:["custom-requests"]})}})},ct=()=>{const e=$();return W({mutationFn:async({id:s,newCustomRequestData:a})=>await K.updateCustomRequest(s,a),mutationKey:["update-custom-request"],onSuccess:()=>{e.invalidateQueries({queryKey:["custom-requests"]})}})},dt=e=>e.reduce((s,{key:a,value:o})=>(a.trim()&&(s[a]=o),s),{}),ut=e=>Object.entries(e).map(([s,a])=>({key:s,value:a}));class ht{constructor(s){this.method=s.method,this.title=s.title,this.path=s.path,this.params=dt(s.params),this.json=s.json?JSON.parse(s.json):{},this.data=s.data,this.bodyType=s.bodyType,this.id=s.id}}const pt=(e,s,a)=>{let o="";for(;e.length>0;){const n=e.match(s);n?(o+=e.slice(0,n.index),o+=a(n),e=e.slice(n.index+n[0].length)):(o+=e,e="")}return o},mt=(e="")=>{const s=[];let a="";return pt(e,/\s*(?:([^\s\\\'\"]+)|'((?:[^\'\\]|\\.)*)'|"((?:[^\"\\]|\\.)*)"|(\\.?)|(\S))(\s|$)?/,o=>{const[n,r,m,f,c,d,u]=o;if(d!=null)throw new Error("Unmatched quote");a+=r||(m||f||c).replace(/\\(?=.)/,""),u!=null&&(s.push(a),a="")}),a&&s.push(a),s};function ft(e){if(e.indexOf("curl ")==0){var s=xt(mt(e)),a={method:"GET",header:{}},o="";return s.forEach(function(n){switch(!0){case yt(n):a.url=n;break;case(n=="-A"||n=="--user-agent"):o="user-agent";break;case(n=="-H"||n=="--header"):o="header";break;case(n=="-d"||n=="--data"||n=="--data-ascii"||n=="--data-raw"):o="data";break;case(n=="-u"||n=="--user"):o="user";break;case(n=="-I"||n=="--head"):a.method="HEAD";break;case(n=="-X"||n=="--request"):o="method";break;case(n=="-b"||n=="--cookie"):o="cookie";break;case n=="--compressed":a.header["Accept-Encoding"]=a.header["Accept-Encoding"]||"deflate, gzip";break;case(n=="-F"||n=="--form"):o="form-data";break;case!!n:switch(o){case"form-data":a.data=a.data||[],a.data.push(n),o="";break;case"header":var r=jt(n);a.header[r[0]]=r[1],o="";break;case"user-agent":a.header["User-Agent"]=n,o="";break;case"data":(a.method=="GET"||a.method=="HEAD")&&(a.method="POST"),a.header["Content-Type"]=a.header["Content-Type"]||"application/x-www-form-urlencoded",a.body=a.body?a.body+"&"+n:n,o="";break;case"user":a.header.Authorization="Basic "+btoa(n),o="";break;case"method":a.method=n,o="";break;case"cookie":a.header["Set-Cookie"]=n,o="";break}break}}),a}}function xt(e){return e.reduce(function(s,a){return a.indexOf("-X")==0?(s.push("-X"),s.push(a.slice(2))):s.push(a),s},[])}function jt(e){return e.split(/: (.+)/)}function yt(e){return/^https?:\/\//.test(e)}const V=e=>{try{const s=typeof e=="string"?JSON.parse(e):e;return JSON.stringify(s,null,2)}catch(s){return console.error("Invalid JSON:",s),""}},bt=({param:e,onChange:s,error:a,...o})=>{const[n,r]=h.useState(e),m=c=>{const{name:d,value:u}=c.target;r(b=>({...b,[d]:u}))},f=()=>{s(n)};return t.jsxs(Ue,{...o,children:[t.jsx(Z,{children:t.jsx(z,{defaultValue:e.key,name:"key",onChange:m,onBlur:f,size:"small",placeholder:"key",fullWidth:!0,variant:"standard",slotProps:{input:{disableUnderline:!0}},error:a})}),t.jsx(Z,{children:t.jsx(z,{defaultValue:e.value,name:"value",onChange:m,onBlur:f,size:"small",placeholder:"value",fullWidth:!0,variant:"standard",slotProps:{input:{disableUnderline:!0}},error:a})})]})},Ct=({title:e,onChange:s})=>{const[a,o]=h.useState(!1),[n,r]=h.useState(e),m=()=>{o(!1);const d=n.trim();if(!d){f();return}r(d),s(d)},f=()=>{o(!1),r(e),s(e)},c=d=>{d.key==="Enter"&&m(),d.key==="Escape"&&f()};return h.useEffect(()=>{r(e)},[e]),a?t.jsx(z,{value:n,onChange:d=>r(d.target.value),onBlur:m,onKeyDown:c,autoFocus:!0,fullWidth:!0,size:"small",variant:"standard",slotProps:{input:{disableUnderline:!0}},sx:{"& .MuiInputBase-input":{fontSize:"1.44rem",fontWeight:400,padding:0}}}):t.jsx(pe,{sx:{width:"100%",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden"},children:t.jsx(P,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",flexGrow:1},variant:"H5",onClick:()=>o(!0),children:e})})},vt=h.forwardRef(({value:e,onChange:s,...a},o)=>t.jsxs(Te,{ref:o,value:e,onChange:s,sx:{minWidth:100},variant:"standard",disableUnderline:!0,...a,children:[t.jsx(B,{value:"GET",children:"GET"}),t.jsx(B,{value:"POST",children:"POST"}),t.jsx(B,{value:"PATCH",children:"PATCH"}),t.jsx(B,{value:"DELETE",children:"DELETE"}),t.jsx(B,{value:"OPTIONS",children:"OPTIONS"})]})),re=()=>({method:"GET",path:"",json:"{}",data:"",params:[{key:"",value:""}],bodyType:"JSON",title:"New request",id:Ne()}),wt=({...e})=>{const s=I.use.request(),a=I.use.setRequest(),{control:o,handleSubmit:n,formState:{errors:r,isValid:m,isDirty:f},setValue:c,trigger:d,reset:u,resetField:b,watch:M}=qe({defaultValues:s||re(),mode:"onChange"}),{fields:S,append:j,remove:g}=Pe({control:o,name:"params"});h.useEffect(()=>(s?(u({...s,json:V(s.json),params:[...ut(s.params)]}),j({key:"",value:""})):u(re()),()=>u()),[s,u,j]);const C=it(),k=ct(),x=i=>{const l=new ht({...i,params:i.params.filter(p=>p.key&&p.value)});s?k.mutate({id:l.id,newCustomRequestData:l}):C.mutate(l),a(l)},T=(i,l)=>{const p=i===S.length-1,{id:R,...y}=l,w=We(y);p&&!w&&j({key:"",value:""}),!p&&w&&g(i),c(`params.${i}`,l),d(`params.${i}`)},[q,A]=h.useState(0),N=(i,l)=>{A(l)},F=M("bodyType"),ye=h.useCallback(i=>{if(F==="JSON"&&i.trim())try{return JSON.parse(i),!0}catch{return"Invalid JSON format"}return!0},[F]),be=async i=>{const l=i.target.value;try{const p=JSON.parse(l.trim()),R=V(p);c("json",R),await d("json")}catch{c("json",l.trim()),await d("json")}},Ce=i=>{i.preventDefault();const l=i.clipboardData.getData("text").trim();let p;try{p=new URL(l),c("path",p.pathname.substring(1)),d("path");const R={};for(const[w,O]of p.searchParams.entries())R[w]=O;const y=Object.entries(R).map(([w,O])=>({key:w,value:O}));g(),y.length>0&&j([...y]),j([{key:"",value:""}])}catch{try{const y=ft(l);c("method",y.method||"GET"),d("method");const w=new URL(y.url);c("path",w.pathname.substring(1)),d("path");const O={};for(const[J,L]of w.searchParams.entries())O[J]=L;const Q=Object.entries(O).map(([J,L])=>({key:J,value:L}));g(),Q.length>0&&j([...Q]),j([{key:"",value:""}]),b("body"),b("data"),b("bodyType"),y.body&&(c("bodyType","JSON"),c("json",V(y.body))),y.data&&(c("bodyType","x-www-form-urlencoded"),c("data",y.data.join("&")),d("bodyType"))}catch{c("path",l)}}};return t.jsxs(v,{...e,gap:2,component:"form",onSubmit:n(x),justifyContent:"space-between",children:[t.jsxs(v,{gap:2,children:[t.jsx(E,{name:"title",control:o,render:({field:i})=>t.jsx(Ct,{title:i.value,onChange:i.onChange})}),t.jsx(v,{direction:"row",gap:2,paddingTop:2,children:t.jsx(E,{name:"path",control:o,rules:{required:"Path is required"},render:({field:i})=>{var l;return t.jsx(z,{...i,label:"Request",fullWidth:!0,onPaste:Ce,sx:{height:"100%"},slotProps:{input:{startAdornment:t.jsx(Ae,{position:"start",children:t.jsx(E,{name:"method",control:o,rules:{required:"Method is required"},render:({field:p})=>t.jsx(vt,{...p})})}),placeholder:"your/request/path"}},error:!!r.path,helperText:(l=r.path)==null?void 0:l.message})}})}),t.jsxs(Je,{value:q,onChange:N,"aria-label":"basic tabs example",children:[t.jsx(ee,{label:"Query"}),t.jsx(ee,{label:"Body"})]}),q===0&&t.jsx(Le,{sx:{flexGrow:1,paddingBlock:1,scrollbarWidth:"thin"},children:t.jsx(He,{children:t.jsx(Ve,{children:S.map((i,l)=>{var p;return t.jsx(bt,{param:i,onChange:R=>T(l,R),error:!!((p=r.params)!=null&&p[l])},i.id)})})})}),q===1&&t.jsxs(t.Fragment,{children:[t.jsx(E,{name:"bodyType",control:o,rules:{required:"Body type is required"},render:({field:i})=>t.jsxs(rt,{row:!0,...i,children:[t.jsx(te,{value:"JSON",control:t.jsx(oe,{}),label:"JSON"}),t.jsx(te,{value:"x-www-form-urlencoded",control:t.jsx(oe,{}),label:"x-www-form-urlencoded"})]})}),F==="JSON"&&t.jsx(E,{name:"json",control:o,rules:{validate:ye},render:({field:i})=>{var l;return t.jsx(z,{...i,label:"Valid json",multiline:!0,rows:8,error:!!r.json,helperText:(l=r.json)==null?void 0:l.message,onBlur:be})}}),F==="x-www-form-urlencoded"&&t.jsx(E,{name:"data",control:o,render:({field:i})=>{var l;return t.jsx(z,{...i,label:"Data",multiline:!0,rows:8,error:!!r.data,helperText:(l=r.data)==null?void 0:l.message})}})]})]}),t.jsx(pe,{textAlign:"end",children:t.jsx(Ie,{type:"submit",variant:"contained",sx:{minWidth:"100px"},disabled:!m||!f,loading:C.isPending||k.isPending,children:s?"Update":"Save"})})]})},gt=D(t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m4 11h-3v3c0 .55-.45 1-1 1s-1-.45-1-1v-3H8c-.55 0-1-.45-1-1s.45-1 1-1h3V8c0-.55.45-1 1-1s1 .45 1 1v3h3c.55 0 1 .45 1 1s-.45 1-1 1"}),"AddCircleRounded"),Rt=()=>{const e=I.use.unsetRequest(),s=I.use.request();return t.jsx(me,{disablePadding:!0,children:t.jsx(fe,{disabled:!s,onClick:()=>{e()},children:t.jsx(v,{width:"100%",gap:1,direction:"row",alignItems:"center",justifyContent:"center",children:t.jsx(gt,{})})})})},St=D(t.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2zM18 4h-2.5l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1"}),"DeleteRounded"),kt=({request:e})=>{const s=I.use.setRequest(),a=I.use.request(),o=I.use.unsetRequest(),n=lt(),[r,m]=h.useState(null),f=u=>{u.preventDefault(),m(r===null?{mouseX:u.clientX+2,mouseY:u.clientY-6}:null)},c=()=>{m(null)},d=()=>{n.mutate(e.id),o(),c()};return t.jsxs(t.Fragment,{children:[t.jsx(me,{disablePadding:!0,onContextMenu:f,children:t.jsx(Oe,{title:e.path,disableInteractive:!0,children:t.jsx(fe,{selected:e.id===(a==null?void 0:a.id),onClick:()=>{s(e)},children:t.jsxs(v,{gap:1,direction:"row",alignItems:"center",sx:{width:"100%",whiteSpace:"nowrap",overflow:"hidden"},children:[t.jsx(P,{variant:"caption",color:"textSecondary",minWidth:"50px",children:e.method}),t.jsx(P,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",flexGrow:1},children:e.title})]})})})}),t.jsx(Ee,{open:r!==null,onClose:c,anchorReference:"anchorPosition",anchorPosition:r!==null?{top:r.mouseY,left:r.mouseX}:void 0,children:t.jsxs(B,{onClick:d,children:[t.jsx(Fe,{children:t.jsx(St,{fontSize:"small"})}),t.jsx(Ge,{children:"Delete"})]})})]})},Tt=({...e})=>{const{data:s,isError:a,isLoading:o}=$e();return o?t.jsx(v,{gap:2,justifyContent:"center",alignItems:"center",sx:{height:"100%"},...e,children:t.jsx(Be,{})}):a?t.jsx(v,{gap:2,justifyContent:"center",alignItems:"center",sx:{height:"100%"},...e,children:t.jsx(P,{variant:"H5",color:"error",children:"Error"})}):t.jsxs(v,{gap:2,...e,children:[t.jsx(P,{variant:"H5",children:"Your requests"}),!s.length&&t.jsx(P,{textAlign:"center",variant:"Body",color:"textSecondary",children:"Empty for now"}),s.length?t.jsx(Rt,{}):null,t.jsx(ze,{children:s.map((n,r)=>t.jsx(kt,{request:n},r))})]})},Et=()=>t.jsxs(v,{gap:4,flexGrow:1,maxWidth:"100%",children:[t.jsx(P,{variant:"H3",children:"Requests"}),t.jsxs(H,{container:!0,spacing:2,sx:{flexGrow:1},children:[t.jsx(H,{size:3,children:t.jsx(Y,{sx:{height:"100%",padding:2},children:t.jsx(Tt,{})})}),t.jsx(H,{size:"grow",children:t.jsx(Y,{sx:{height:"100%"},children:t.jsx(v,{sx:{height:"100%"},gap:2,padding:2,children:t.jsx(wt,{flexGrow:1})})})})]})]});export{Et as default};
